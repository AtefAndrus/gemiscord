# Gemiscord Configuration File
# Main configuration for the Discord bot with Gemini AI integration

prompts:
  base_system: |
    ã‚ãªãŸã¯è¦ªåˆ‡ã§è³¢ã„AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚Discordä¸Šã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è³ªå•ã«ç­”ãˆãŸã‚Šã€ä¼šè©±ã‚’ã—ãŸã‚Šã—ã¾ã™ã€‚

    é‡è¦: ä»¥ä¸‹ã®å ´åˆã¯å¿…ãšsearch_webé–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ï¼š
    - å¤©æ°—æƒ…å ±ï¼ˆä»Šæ—¥ã®å¤©æ°—ã€é€±é–“å¤©æ°—äºˆå ±ãªã©ï¼‰
    - æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã€æœ€è¿‘ã®å‡ºæ¥äº‹
    - æ ªä¾¡ã€ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆãªã©ã®é‡‘èæƒ…å ±
    - æœ€æ–°ã®æŠ€è¡“æƒ…å ±ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
    - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®æƒ…å ±ãŒå¿…è¦ãªè³ªå•

    ä¸€èˆ¬çš„ãªçŸ¥è­˜ã‚„æ¦‚å¿µã«ã¤ã„ã¦ç­”ãˆã‚‹éš›ã¯ã€æ¤œç´¢ã¯ä¸è¦ã§ã™ã€‚

    ä»¥ä¸‹ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã«å¾“ã£ã¦ãã ã•ã„ï¼š
    - ç°¡æ½”ã§åˆ†ã‹ã‚Šã‚„ã™ã„å›ç­”ã‚’å¿ƒãŒã‘ã‚‹
    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’ç†è§£ã—ã€é©åˆ‡ã«å¿œç­”ã™ã‚‹
    - ç¤¼å„€æ­£ã—ãã€ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªå£èª¿ã‚’ä¿ã¤
    - æŠ€è¡“çš„ãªè³ªå•ã«ã‚‚åˆ†ã‹ã‚Šã‚„ã™ãç­”ãˆã‚‹

function_calling:
  search_function:
    name: "search_web"
    description: |
      ğŸ” MANDATORY web search function for real-time information.

      âš ï¸ CRITICAL: You MUST call this function for:
      â€¢ Weather queries (ä»Šæ—¥ã®å¤©æ°—, æ°—æ¸©, etc.)
      â€¢ Latest news & recent events (æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹, æœ€è¿‘ã®å‹•å‘, etc.)
      â€¢ Celebrity/company updates (ã‚¤ãƒ¼ãƒ­ãƒ³ãƒã‚¹ã‚¯, Apple, etc.)
      â€¢ Stock prices & financial data
      â€¢ Sports results & current events
      â€¢ Any query with time indicators (ä»Šæ—¥, æœ€è¿‘, ç¾åœ¨, etc.)

      ğŸš« NEVER answer these types of questions without searching first.
      âœ… Always search for real-time data before responding.

  character_count_function:
    name: "count_characters"
    description: "Count characters in message to check Discord 2000-character limit"

response_handling:
  message_limit_strategy: "compress" # compress | split
  max_characters: 2000
  compress_instruction: "2000æ–‡å­—ä»¥å†…ã§ç°¡æ½”ã«å¿œç­”ã—ã¦ãã ã•ã„"
  split_options:
    max_length: 1900
    prefer_line_breaks: true

message_processing:
  mention_placeholder:
    user: "[ãƒ¦ãƒ¼ã‚¶ãƒ¼]"
    channel: "[ãƒãƒ£ãƒ³ãƒãƒ«]"
    role: "[ãƒ­ãƒ¼ãƒ«]"

api:
  gemini:
    models:
      primary: "gemini-2.0-flash"
      fallback: "gemini-2.5-flash"
      available:
        - "gemini-2.0-flash"
        - "gemini-2.5-flash"
        - "gemini-2.5-flash-lite-preview-06-17"
    rate_limits:
      "gemini-2.5-flash":
        rpm: 10
        tpm: 250000
        rpd: 500
      "gemini-2.0-flash":
        rpm: 15
        tpm: 1000000
        rpd: 1500
      "gemini-2.5-flash-lite-preview-06-17":
        rpm: 15
        tpm: 250000
        rpd: 500

  brave_search:
    endpoint: "https://api.search.brave.com/res/v1/web/search"
    free_quota: 2000
    rate_limits:
      requests_per_second: 1

constants:
  cache:
    ttl_minutes:
      rate_limit_rpm: 1
      rate_limit_rpd: 1440 # 24 hours
      search_usage: 43200 # 30 days

# UI/UX configuration
ui:
  activity:
    update_interval: 300000 # 5 minutes
    messages:
      - "{servers} servers | @mention for help"
      - "Powered by Gemini AI"
      - "v{version} | Search enabled"
  messaging:
    split_delay: 1000 # 1 second between split messages
    preview_length: 200
  emojis:
    success: "âœ…"
    error: "âŒ"
    warning: "âš ï¸"
    search: "ğŸ”"
  commands:
    ephemeral:
      default: false # All commands ephemeral by default
      admin_only: false # Admin commands always ephemeral
      config_commands: false # /config command visible to channel
      status_commands: false # /status command visible to channel
      search_commands: false # /search command ephemeral
      model_commands: false # /model command ephemeral

# Search and AI parameters
search:
  defaults:
    count: 10 # Default search result count
    max_results: 20 # Maximum results per query
    display_count: 5 # Results shown in Discord
  validation:
    query:
      min_length: 3
      max_length: 200
  formatting:
    preview_length: 1900

ai:
  timeout: 10000 # 10 second API timeout
  temperature: 0.9 # Default temperature setting

# Monitoring and alerting
monitoring:
  thresholds:
    usage:
      warning: 0.7 # 70% usage warning
      critical: 0.9 # 90% usage critical
    memory:
      warning: 104857600 # 100MB
      critical: 157286400 # 150MB
  intervals:
    health_check: 60000 # 1 minute
    metrics: 300000 # 5 minutes

# Logging configuration
logging:
  file:
    enabled: true # Enable file logging
    level: "DEBUG" # File log level (ERROR, WARN, INFO, DEBUG)
    directory: "logs" # Relative to project root
    filename_pattern: "gemiscord-{date}.log" # {date} = YYYY-MM-DD
    max_files: 30 # Keep last 30 days
    include_console_colors: false # Strip ANSI codes from file logs
    separate_error_file: true # Create separate .error.log file
    json_format: false # Use plain text format (true for JSON logs)
  rotation:
    daily: true # Rotate logs daily
    max_size: "50MB" # Max file size before rotation
    cleanup_old: true # Auto-cleanup old files
  performance:
    buffer_size: 8192 # Buffer size for async writes
    flush_interval: 5000 # Flush to disk every 5 seconds

# Rate limiting enhancements
rate_limiting:
  safety_buffer: 0.8
  buffer_percentage: 0.9
  time_windows:
    minute: 60000 # 1 minute in ms
    day: 86400000 # 24 hours in ms
    month: 2592000000 # 30 days in ms
